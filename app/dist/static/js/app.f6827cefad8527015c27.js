webpackJsonp([1],{MKVk:function(t,o){},NHnr:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=e("7+uW"),s={indexedDB:window.indexedDB||window.webkitindexedDB||window.msIndexedDB||mozIndexedDB,openDB:function(t,o,e,n,s){o=o||1;var r=this.indexedDB.open(t,o);r.onerror=function(t){console.log("IndexedDB数据库打开错误")},r.onsuccess=function(t){e=t.target.result,s&&"function"==typeof s&&s(e)},r.onupgradeneeded=function(t){var o=t.target.result;n&&(o.objectStoreNames.contains(n.name)||o.createObjectStore(n.name,{keyPath:n.key}))}},deleteDB:function(t,o){var e=this.indexedDB.deleteDatabase(t);e.onerror=function(){console.log("删除数据库出错")},e.onsuccess=function(){o&&"function"==typeof o&&o()}},closeDB:function(t){t.close(),console.log("数据库已关闭")},addData:function(t,o,e,n){for(var s,r=t.transaction(o,"readwrite").objectStore(o),a=0,d=e.length;a<d;a++)(s=r.add(e[a])).onerror=function(){console.error("ADD添加数据报错")},s.onsuccess=function(){n&&"function"==typeof n&&n()}},putData:function(t,o,e,n){for(var s,r=t.transaction(o,"readwrite").objectStore(o),a=0,d=e.length;a<d;a++)(s=r.put(e[a])).onerror=function(){console.error("PUT添加数据报错")},s.onsuccess=function(){n&&"function"==typeof n&&n()}},deleteData:function(t,o,e){t.transaction(o,"readwrite").objectStore(o).delete(e)},clearData:function(t,o){t.transaction(o,"readwrite").objectStore(o).clear()},getData:function(t,o,e,n){var s;(s=t.transaction(o,"readonly").objectStore(o).get(e)).onerror=function(){console.log("通过KEY获取数据报错")},s.onsuccess=function(t){var o=t.target.result;n&&"function"==typeof n&&n(o)}},handleDataByCursor:function(t,o,e,n){var s;n=n||"";(s=t.transaction(o,"readwrite").objectStore(o).openCursor(n)).onerror=function(){console.log("通过游标获取数据报错")},s.onsuccess=function(t){var o=t.target.result;o&&e&&"function"==typeof e&&e(o)}},handleDataByIndex:function(t,o,e,n,s){var r;s=s||"";(r=t.transaction(o,"readwrite").objectStore(o).index(sursorIndex).openCursor(s)).onerror=function(){console.log("通过索引游标获取数据报错")},r.onsuccess=function(t){var o=t.target.result;o&&n&&"function"==typeof n&&n(o)}},createCursorIndex:function(t,o,e,n){t.transaction(o,"readwrite").objectStore(o).createIndex(e,e,{unique:!1}),n&&"function"==typeof n&&n()}},r={name:"App",data:function(){return{}},created:function(){var t=this;s.openDB("vshopDB",1,null,{name:"vshop",key:"name"},function(o){s.getData(o,"vshop","todo",function(e){if(console.log(e),e){var n=new Object;n.name="todo",n.result=e,t.$store.commit("importDataFromIdxDB",n)}else{s.putData(o,"vshop",[{name:"todo",todoList:[]}])}})})}},a={render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]};var d=e("VU/8")(r,a,!1,function(t){e("MKVk")},null,null).exports,i=e("/ocq"),c={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"addTodo"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.todoText,expression:"todoText"}],staticClass:"input",attrs:{type:"text",name:"",value:""},domProps:{value:t.todoText},on:{keyup:function(o){if(!("button"in o)&&t._k(o.keyCode,"enter",13,o.key))return null;t.addTodo(o)},input:function(o){o.target.composing||(t.todoText=o.target.value)}}}),t._v(" "),e("button",{attrs:{type:"button",name:"button"},on:{click:t.addTodo}},[t._v("\n      Add\n    ")])])},staticRenderFns:[]};var u={name:"TodoList",components:{TodoAdd:e("VU/8")({name:"addTodo",data:function(){return{todoText:""}},methods:{addTodo:function(){this.todoText&&(this.$emit("add",this.todoText),this.todoText="")}}},c,!1,function(t){e("QDuB")},"data-v-6964101c",null).exports},data:function(){return{}},methods:{checkTodo:function(t){this.$store.dispatch("checkTodo",t)},addTodo:function(t){this.$store.dispatch("addTodo",t)}},computed:{completedCounts:function(){return this.todos.filter(function(t){return t.isCompleted}).length},notCompletedCounts:function(){return this.todos.filter(function(t){return!t.isCompleted}).length},todos:function(){return this.$store.state.todo.todoList}}},l={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"todoList"}},[e("h1",[t._v("Todo List")]),t._v(" "),e("todo-add",{on:{add:t.addTodo}}),t._v(" "),e("ul",{staticClass:"todos"},t._l(t.todos,function(o,n){return e("li",{key:n,staticClass:"todo"},[e("input",{attrs:{type:"checkbox",name:"",value:""},domProps:{checked:o.isCompleted},on:{click:function(o){t.checkTodo(n)}}}),t._v(" "),e("span",{class:o.isCompleted?"completed":"",on:{click:function(o){t.checkTodo(n)}}},[e("em",[t._v(t._s(n+1)+".")]),t._v(t._s(o.text)+"\n      ")])])})),t._v(" "),e("div",[e("p",{directives:[{name:"show",rawName:"v-show",value:0===t.todos.length,expression:"todos.length === 0"}]},[t._v("Have No todos")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:0!==t.todos.length,expression:"todos.length !== 0"}]},[e("strong",[t._v(t._s(t.todos.length))]),t._v(" task to do,\n        "+t._s(t.completedCounts)+" have done.\n        "+t._s(t.notCompletedCounts)+" not do.\n    ")])])],1)},staticRenderFns:[]};var f=e("VU/8")(u,l,!1,function(t){e("uNi7")},"data-v-7721c55c",null).exports;n.a.use(i.a);var p=new i.a({routes:[{path:"/",name:"todoList",component:f}]}),v=e("NYxO"),m={addTodo:function(t,o){var e=t.commit,n=(t.state,t.dispatch);e("addNewTodo",{text:o,isCompleted:!1,cTime:new Date}),n("updateTodo2IndexedDB")},checkTodo:function(t,o){var e=t.commit,n=(t.state,t.dispatch);e("checkTodo",o),n("updateTodo2IndexedDB")},updateTodo2IndexedDB:function(t){var o=t.state;s.openDB("vshopDB",1,null,{name:"vshop",key:"name"},function(t){console.log(o.todo.todoList),s.putData(t,"vshop",[o.todo])})}};n.a.use(v.a);var h=new v.a.Store({state:{todo:{name:"todo",todoList:[]},currUser:{name:"未登录",avatar:""}},getters:{},mutations:{importDataFromIdxDB:function(t,o){t[o.name]=o.result},setCurrUser:function(t,o){t.currUser=o},logoutAccount:function(t){t.currUser={name:"未登录",avatar:""}},addNewUser:function(t,o){t.users.userList.push(o)},deleteUser:function(t,o){"000"!==t.users.userList[o].coding&&t.users.userList.splice(o,1)},resetMessageNumber:function(t){t.messages.number=0},deleteMessage:function(t,o){t.messages.messageList.splice(o,1)},changeMessage:function(t,o){for(var e in o)o[e]&&(t.messages[e]=o[e])},addNewTodo:function(t,o){t.todo.todoList.unshift(o)},deleteTodo:function(t,o){t.todo.todoList.splice(o,1)},checkTodo:function(t,o){var e=t.todo.todoList;e[o].isCompleted=!e[o].isCompleted},changeTodoState:function(t,o){for(var e=0,n=t.todo.todoList.length;e<n;e++)t.todo.todoList[e].time===o&&(t.todo.todoList[e].state="已到期",t.todo.todoList[e].cellClassName={state:"state-change"})}},actions:m});n.a.config.productionTip=!1,new n.a({el:"#app",router:p,store:h,components:{App:d},template:"<App/>"}),"serviceWorker"in navigator&&navigator.serviceWorker.register("./service-worker.js")},QDuB:function(t,o){},uNi7:function(t,o){}},["NHnr"]);
//# sourceMappingURL=app.f6827cefad8527015c27.js.map